/*@license
ARIA Date Picker Module 4.4 for Apex 4X
Author: Bryan Garaventa (https://www.linkedin.com/in/bgaraventa)
Contributions by Danny Allen (dannya.com) / Wonderscore Ltd (wonderscore.co.uk)
https://github.com/whatsock/apex
License: MIT <https://opensource.org/licenses/MIT>
*/
"setDatepicker"in $A||($A.addWidgetProfile("Datepicker",{configure:function(e){return{returnFocus:!1,allowRerender:!0,exposeBounds:!0,exposeHiddenClose:!1}},role:function(e){return{role:"dialog","aria-modal":"false","aria-label":e.role}},innerRole:function(e){return{role:"application"}}}),$A.extend({setDatepicker:function(x){function l(e){D.alt=e.altKey,D.ctrl=e.ctrlKey,D.shift=e.shiftKey}var e=(x=x||{}).helpTextShort?x.helpTextShort:"Press F1 for help.",t=x.helpText?x.helpText:"Press the arrow keys to navigate by day, PageUp and PageDown to navigate by month, Alt+PageUp and Alt+PageDown to navigate by year, or Escape to cancel.",n=x.openOnFocusHelpText?x.openOnFocusHelpText:"Press Down arrow to browse the calendar, or Escape to close.",m=!1,g=!1,a=x.id||$A.genId(),r=$A.morph(x.toggle),$=$A.morph(x.input),p=!0===x.enableComments,f=$A.isFn(x.onActivate)?x.onActivate:function(e,t){$.value=t.formatDate(t),t.remove(),t.triggerClicked?r.focus():$.focus(),t.triggerClicked=!1},D={},M=$A.genId(),s=$A([{id:a,role:x.role||"Calendar",widgetType:"Datepicker",trigger:r,target:$,on:"opendatepicker",disabled:!0===x.disabled,returnFocus:!1,openOnFocus:!0===x.openOnFocus,openOnFocusHelpText:n,showEscBtn:!0===x.showEscBtn,escBtnName:x.escBtnName||"Close",escBtnIcon:x.escBtnIcon||"&times;",tooltipTxt:x.tooltipTxt||"Press Escape to cancel",markedTxt:x.markedTxt||"Selected",disabledTxt:x.disabledTxt||"Disabled",commentedTxt:x.commentedTxt||"Has Comment",prevTxt:x.prevTxt||"Previous",nextTxt:x.nextTxt||"Next",monthTxt:x.monthTxt||"Month",yearTxt:x.yearTxt||"Year",leftButtonYearText:x.leftButtonYearText||"&#8656;",rightButtonYearText:x.rightButtonYearText||"&#8658;",leftButtonMonthText:x.leftButtonMonthText||"&#8592;",rightButtonMonthText:x.rightButtonMonthText||"&#8594;",drawFullCalendar:!0===x.drawFullCalendar,highlightToday:!$A.isBool(x.highlightToday)||x.highlightToday,pageUpDownNatural:!0,inputDateFormat:x.inputDateFormat||"MM/DD/YYYY",audibleDateFormat:x.audibleDateFormat||"dddd D MMMM YYYY",initialDate:x.initialDate instanceof Date?x.initialDate:new Date,minDate:void 0!==x.minDate?x.minDate instanceof Date?x.minDate:new Date((new Date).setDate((new Date).getDate()+x.minDate)):void 0,maxDate:void 0!==x.maxDate?x.maxDate instanceof Date?x.maxDate:new Date((new Date).setDate((new Date).getDate()+x.maxDate)):void 0,disableWeekdays:void 0!==x.disableWeekdays&&x.disableWeekdays,disableWeekends:void 0!==x.disableWeekends&&x.disableWeekends,className:x.className||"calendar",range:{disabledWDays:[],0:{name:x.months&&x.months[0]?x.months[0]:"January",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},1:{name:x.months&&x.months[1]?x.months[1]:"February",max:28,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},2:{name:x.months&&x.months[2]?x.months[2]:"March",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},3:{name:x.months&&x.months[3]?x.months[3]:"April",max:30,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},4:{name:x.months&&x.months[4]?x.months[4]:"May",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},5:{name:x.months&&x.months[5]?x.months[5]:"June",max:30,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},6:{name:x.months&&x.months[6]?x.months[6]:"July",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},7:{name:x.months&&x.months[7]?x.months[7]:"August",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},8:{name:x.months&&x.months[8]?x.months[8]:"September",max:30,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},9:{name:x.months&&x.months[9]?x.months[9]:"October",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},10:{name:x.months&&x.months[10]?x.months[10]:"November",max:30,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},11:{name:x.months&&x.months[11]?x.months[11]:"December",max:31,marked:{},disabled:{},disabledWDays:[],comments:{},message:{}},wDays:[{shrt:x.days&&x.days[0]?x.days[0].s:"S",lng:x.days&&x.days[0]?x.days[0].l:"Sunday"},{shrt:x.days&&x.days[1]?x.days[1].s:"M",lng:x.days&&x.days[1]?x.days[1].l:"Monday"},{shrt:x.days&&x.days[2]?x.days[2].s:"T",lng:x.days&&x.days[2]?x.days[2].l:"Tuesday"},{shrt:x.days&&x.days[3]?x.days[3].s:"W",lng:x.days&&x.days[3]?x.days[3].l:"Wednesday"},{shrt:x.days&&x.days[4]?x.days[4].s:"T",lng:x.days&&x.days[4]?x.days[4].l:"Thursday"},{shrt:x.days&&x.days[5]?x.days[5].s:"F",lng:x.days&&x.days[5]?x.days[5].l:"Friday"},{shrt:x.days&&x.days[6]?x.days[6].s:"S",lng:x.days&&x.days[6]?x.days[6].l:"Saturday"}],wdOffset:isNaN(x.wdOffset)?0:x.wdOffset},getWDay:function(e,t,n){t=$A.isNum(t)?t:e.range.current.wDay;var a=e.range.wdOffset;return a<0?t=t+a<0?7+a:t+a:0<a&&(t=6<t+a?t+a-6-1:t+a),n&&(t=6-t),t},getDateOrdinalSuffix:function(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"},formatDate:function(e,t,n){t=t||{YYYY:e.range.current.year,MMMM:e.range[e.range.current.month].name,dddd:e.range.wDays[e.range.current.wDay].lng,MM:("00"+(e.range.current.month+1)).slice(-2),DD:("00"+e.range.current.mDay).slice(-2),Do:e.getDateOrdinalSuffix(e.range.current.mDay),M:e.range.current.month+1,D:e.range.current.mDay},$A.isStr(n)||(n=e.inputDateFormat);var a=new RegExp(Object.keys(t).join("|"),"gi");return n.replace(a,function(e){return t[e]})},modifyDateValues:function(e,t){for(var n in t){var a=t[n];"month"===n&&(e.month+=a,a<0?e.month<0&&(e.month=11,e.year&&(e.year-=1)):11<e.month&&(e.month=0,e.year&&(e.year+=1)))}return e},setFocus:function(e,t,n){var a=this;return!!e&&(a.current=e,a.query("td.dayInMonth.selected",function(e,t){$A.setAttr(t,{tabindex:"-1"}),$A.remClass(t,"selected"),$A.data(t,"_Selected",0)}),$A.addClass(e,"selected"),$A.data(e,"_Selected",!0),$A.setAttr(e,{tabindex:"0"}),n||("PM"===a.navBtn?(a.buttons.pM.focus(),setTimeout(function(){$A.announce(a.range[a.range.current.month].name,!1,!0)},1),a.navBtnS=!0):"NM"===a.navBtn?(a.buttons.nM.focus(),setTimeout(function(){$A.announce(a.range[a.range.current.month].name,!1,!0)},1),a.navBtnS=!0):"PY"===a.navBtn?(a.buttons.pY.focus(),setTimeout(function(){$A.announce(a.range.current.year.toString(),!1,!0)},1),a.navBtnS=!0):"NY"===a.navBtn?(a.buttons.nY.focus(),setTimeout(function(){$A.announce(a.range.current.year.toString(),!1,!0)},1),a.navBtnS=!0):(!a.openOnFocus||a.openOnFocus&&!m&&g)&&e.focus()),a.fn.navBtn?a.fn.navBtn="":a.navBtn="",!0)},setCurrent:function(e){e.date instanceof Date&&(e.range.current={mDay:e.date.getDate(),month:e.date.getMonth(),year:e.date.getFullYear(),wDay:e.date.getDay()})},setDayMarked:function(e,t,n){var a=t.getFullYear(),r=t.getMonth(),s=t.getDate();if(n)"object"!=typeof e.range[r].marked[a]&&(e.range[r].marked[a]=[]),e.range[r].marked[a].push(s);else if("object"==typeof e.range[r].marked[a]){var o=e.range[r].marked[a].indexOf(s);-1!==o&&delete e.range[r].marked[a][o]}},clearAllMarked:function(e){for(var t in e.range)e.range[t].marked={}},setDayDisabled:function(e,t,n){var a=t.getFullYear(),r=t.getMonth(),s=t.getDate();if(n)"object"!=typeof e.range[r].disabled[a]&&(e.range[r].disabled[a]=[]),e.range[r].disabled[a].push(s);else if("object"==typeof e.range[r].disabled[a]){var o=e.range[r].disabled[a].indexOf(s);-1!==o&&delete e.range[r].disabled[a][o]}},setMonthDisabled:function(e,t,n){var a=t.getFullYear(),r=t.getMonth();if(n){e.range[r].disabled[a]=[];for(var s=1;s<=e.range[r].max;s++)e.range[r].disabled[a].push(s)}else e.range[r].disabled[a]=[]},setDayOfWeekDisabled:function(e,t,n,a){var r=t.getFullYear(),s=t.getMonth();"object"!=typeof e.range[s].disabled[r]&&(e.range[s].disabled[r]=[]);for(var o=new Date(r,s,1),d=1;d<=e.range[s].max;d++)if(o.setDate(d),-1!==n.indexOf(o.getDay()))if(a)e.range[s].disabled[r].push(d);else{var i=e.range[s].marked[r].indexOf(d);-1!==i&&delete e.range[s].marked[r][i]}},setWeekdaysDisabled:function(e,t,n){e.setDayOfWeekDisabled(e,t,[1,2,3,4,5],n)},setWeekendsDisabled:function(e,t,n){e.setDayOfWeekDisabled(e,t,[0,6],n)},clearAllDisabled:function(e){for(var t in e.range)e.range[t].disabled={}},setMonthMessage:function(e,t,n){var a=t.getFullYear(),r=t.getMonth();$A.isStr(n)&&0<n.length?e.range[r].message[a]=n:delete e.range[r].message[a]},clearAllMessage:function(e){for(var t in e.range)e.range[t].message={}},isDisabledDate:function(e,t,n,a){a=a||e.range.current;var r=e.range[a.month].disabled[a.year],s=e.range[a.month].disabled["*"],o=e.range[a.month].disabledWDays,d=e.range.disabledWDays,i=n.getDay();return!!(r&&-1!==$A.inArray(t,r)||s&&-1!==$A.inArray(t,s)||o.length&&-1!==$A.inArray(i,o)||d.length&&-1!==$A.inArray(i,d)||e.isOutsideDateRange(n))},isOutsideDateRange:function(e){var t=this.createDateComparisonValue(e);return this.minDateComparisonValue&&t<this.minDateComparisonValue||this.maxDateComparisonValue&&t>this.maxDateComparisonValue},createDayCell:function(e,t,n,a,r){var s=this,o="<td ",d=s.createDateComparisonValue(new Date),i=s.createDateComparisonValue(t);i===d&&(o+='aria-current="date" '),a&&(o+='aria-disabled="true" '),o+='aria-label="';var u=s.range[s.range.current.month].comments[s.range.current.year],c=s.range[s.range.current.month].comments["*"],l="";u&&u[e]?l=u[e]:c&&c[e]&&(l=c[e]),l&&(o+=s.commentedTxt.replace(/<|>|\"/g,"")+" ");var m=t.getMonth(),g={YYYY:t.getFullYear(),MMMM:s.range[m].name,dddd:s.range.wDays[t.getDay()].lng,MM:("00"+(m+1)).slice(-2),DD:("00"+e).slice(-2),Do:s.getDateOrdinalSuffix(e),M:m+1,D:e},p=new RegExp(Object.keys(g).join("|"),"gi");o+=s.audibleDateFormat.replace(p,function(e){return g[e]}),l&&(o+=l.replace(/<|>|\n/g," ").replace(/\"/g,'\\"')),o+='" role="button" tabindex="-1" ',o+='class="day '+(n||""),!0===s.highlightToday&&i===d&&(o+=" dayToday");var f=s.range[s.range.current.month].marked[s.range.current.year]&&-1!==s.range[s.range.current.month].marked[s.range.current.year].indexOf(e);return(r&&!a||f)&&(o+=" dayMarked"),a&&(o+=" disabled"),l&&(o+=" comment"),o+='" ',o+='title="',f?o+=s.markedTxt.replace(/<|>|\"/g,""):a&&(o+=s.disabledTxt.replace(/<|>|\"/g,"")),o+='" id="'+s.baseId+e+'"><span aria-hidden="true">'+e+"</span></td>"},createDateComparisonValue:function(e){return parseInt(e.getFullYear()+("00"+e.getMonth()).slice(-2)+("00"+e.getDate()).slice(-2),10)},presetDate:function(e,t,n,a){(e=e||this).initialDate=t||e.initialDate||new Date,e.minDate=n||e.minDate||null,e.maxDate=a||e.maxDate||null,e.setDateComparisons(e),e.date=e.initialDate,e.setCurrent(e),e.fn.current={},$A.extend(!0,e.fn.current,e.range.current)},setDate:function(e,t){void 0===t&&((e.minDate||e.maxDate)&&e.isOutsideDateRange(e.initialDate)?e.initialDate<e.minDate?t=e.minDate:e.initialDate>e.maxDate&&(t=e.maxDate):t=e.initialDate),e.date=t,e.setCurrent(e),e.fn.current={},$A.extend(!0,e.fn.current,e.range.current)},setDateComparisons:function(e){e.minDate instanceof Date&&(e.minDate.setHours(0,0,0,0),e.minDateComparisonValue=e.createDateComparisonValue(e.minDate)),e.maxDate instanceof Date&&(e.maxDate.setHours(0,0,0,0),e.maxDateComparisonValue=e.createDateComparisonValue(e.maxDate)),e.initialDate instanceof Date?e.currentDate=e.initialDate:e.currentDate=new Date,e.currentDateComparisonValue=e.createDateComparisonValue(e.currentDate)},storeCurrentDate:function(e){e.date=new Date(e.range.current.year,e.range.current.month,e.range.current.mDay)},setDisabled:function(e,t){(e="boolean"==typeof e?(t=e,this):e||this).disabled=!!t,$A.setAttr([$,r],"disabled",e.disabled),e.disabled||$A.remAttr([$,r],"disabled")},onceBeforeRender:function(e){e.date instanceof Date||(e.setDateComparisons(e),e.setDate(e))},rerenderTable:function(e){e.rerendering=!0,e.afterRemove(e),e.beforeRender(e),e.duringRender(e),e.afterRender(e),e.rerendering=!1},beforeRender:function(e){var t=$.value,n=$.value.split("/");"DD/MM/YYYY"===x.inputDateFormat&&3===n.length?t=n[1]+"/"+n[0]+"/"+n[2]:"DD/MM/YYYY"===x.inputDateFormat&&(t=new Date),!e.rerendering&&t&&e.presetDate(e,new Date(t)),e.disableWeekdays&&e.setWeekdaysDisabled(e,e.date,!0),e.disableWeekends&&e.setWeekendsDisabled(e,e.date,!0),!$A.isFn(x.configure)||e.stopConfigure||e.configureLoading||(e.configureLoading=e.cancel=!0,e.fn.navBtn=e.navBtn,!0===x.configure.apply(e,[e])&&setTimeout(function(){e.render()},1)),1===e.range.current.month&&(e.range[1].max=1===new Date(e.range.current.year,1,29).getMonth()?29:28),e.baseId=M,e.prevBtnId=e.baseId+"p",e.nextBtnId=e.baseId+"n",e.monthCellId=e.baseId+"YC";var a=e.modifyDateValues({month:e.range.current.month,year:e.range.current.year},{month:-1}),r=new Date;r.setMonth(a.month),r.setFullYear(a.year);var s=e.modifyDateValues({month:e.range.current.month,year:e.range.current.year},{month:1}),o=new Date;o.setMonth(s.month),o.setFullYear(s.year);var d="";if(!x.condenseYear){var i=!e.isOutsideDateRange(new Date(e.range.current.year-1,0,1)),u=!e.isOutsideDateRange(new Date(e.range.current.year+1,0,1));d='<tr class="yearSelector" role="presentation"><td class="nav prev btn year'+(i?"":" disabled")+'" accesskey="1" title="'+e.prevTxt.replace(/<|>|\"/g,"")+" "+e.yearTxt.replace(/<|>|\"/g,"")+'" aria-label="'+e.prevTxt.replace(/<|>|\"/g,"")+" "+e.yearTxt.replace(/<|>|\"/g,"")+'"'+(i?' tabindex="0"':' aria-disabled="true" tabindex="-1"')+' role="button" id="'+e.prevBtnId+'Y"><span aria-hidden="true">'+e.leftButtonYearText+'</span></td><td title="'+e.tooltipTxt.replace(/<|>|\"/g,"")+'" colspan="5" class="year" role="presentation"><span>'+e.range.current.year+'</span></td><td class="nav next btn year'+(u?"":" disabled")+'" accesskey="2" title="'+e.nextTxt.replace(/<|>|\"/g,"")+" "+e.yearTxt.replace(/<|>|\"/g,"")+'" aria-label="'+e.nextTxt.replace(/<|>|\"/g,"")+" "+e.yearTxt.replace(/<|>|\"/g,"")+'"'+(u?' tabindex="0"':' aria-disabled="true" tabindex="-1"')+' role="button" id="'+e.nextBtnId+'Y"><span aria-hidden="true">'+e.rightButtonYearText+"</span></td></tr>"}var c=!e.isOutsideDateRange(new Date(a.year,a.month,e.range[a.month].max)),l=!e.isOutsideDateRange(new Date(s.year,s.month,1)),m='<tr class="monthSelector" role="presentation"><td class="nav prev btn month'+(c?"":" disabled")+'" accesskey="3" title="'+e.prevTxt.replace(/<|>|\"/g,"")+" "+e.monthTxt.replace(/<|>|\"/g,"")+'" aria-label="'+e.prevTxt.replace(/<|>|\"/g,"")+" "+e.monthTxt.replace(/<|>|\"/g,"")+'"'+(c?' tabindex="0"':' aria-disabled="true" tabindex="-1"')+' role="button" id="'+e.prevBtnId+'"><span aria-hidden="true">'+e.leftButtonMonthText+'</span></td><td colspan="5" class="month" id="'+e.monthCellId+'" role="presentation"><span>'+e.range[e.range.current.month].name+(x.condenseYear?" "+e.range.current.year:"")+'</span></td><td class="nav next btn month'+(l?"":" disabled")+'" accesskey="4" title="'+e.nextTxt.replace(/<|>|\"/g,"")+" "+e.monthTxt.replace(/<|>|\"/g,"")+'" aria-label="'+e.nextTxt.replace(/<|>|\"/g,"")+" "+e.monthTxt.replace(/<|>|\"/g,"")+'"'+(l?' tabindex="0"':' aria-disabled="true" tabindex="-1"')+' role="button" id="'+e.nextBtnId+'"><span aria-hidden="true">'+e.rightButtonMonthText+"</span></td></tr>";e.content="",e.content+='<table role="presentation" class="calendar">'+d+m+'<tr role="presentation" aria-hidden="true">';for(var g=e.iter=0;g<7;g++){var p=e.getWDay(e,g),f=e.range.wDays[p];g||(e.iter=e.iterE=6<p+6?-1+p:p+6,e.iterS=p),e.content+='<th scope="col" class="week" title="'+f.lng+'" role="presentation"><span>'+f.shrt+"</span></th>"}e.content+='</tr><tr role="presentation">';var D=new Date;D.setDate(1),D.setMonth(e.range.current.month),D.setFullYear(e.range.current.year);var y=D.getDay();D.setDate(e.range[e.range.current.month].max);var h=D.getDay(),b=e.iterS;if(!0===e.drawFullCalendar)var v=new Date(a.year,a.month+1,0).getDate()-new Date(e.range.current.year,e.range.current.month,0).getDay()+e.range.wdOffset;for(;b!==y;)b=6<b+1?0:b+1,!0===e.drawFullCalendar?(r.setDate(v),e.content+=e.createDayCell(v,r,"dayInPrevMonth",e.isDisabledDate(e,v,r)),++v):e.content+='<td class="empty" role="presentation"><span>&nbsp;</span></td>';for(e.range.track={},g=1;g<=31;g++)e.range.track[e.baseId+g]=g;for(g=1;g<=e.range[e.range.current.month].max;g++){D.setDate(g);var A=g===e.fn.current.mDay&&e.range.current.month===e.fn.current.month&&e.range.current.year===e.fn.current.year;e.content+=e.createDayCell(g,D,"dayInMonth",e.isDisabledDate(e,g,D),A),(b=D.getDay())===e.iter&&g<e.range[e.range.current.month].max&&(e.content+='</tr><tr role="presentation">')}for(!0===e.drawFullCalendar&&(v=1);h!==e.iter;)h=6<h+1?0:h+1,!0===e.drawFullCalendar?(o.setDate(v),e.content+=e.createDayCell(v,o,"dayInNextMonth",e.isDisabledDate(e,v,o)),++v):e.content+='<td class="empty" role="presentation"><span>&nbsp;</span></td>';e.content+="</tr></table>",$A.isNode(e.messageContainer)||(e.messageContainerId=$A.genId(),e.messageContainer=$A.create("div",{id:e.messageContainerId},{},"monthMessage")),e.range[e.range.current.month].message[e.range.current.year]?(e.messageContainer.innerHTML="<p>"+e.range[e.range.current.month].message[e.range.current.year]+"</p>",$A.setAttr(e.container,"aria-labelledby",e.messageContainerId)):(w||(e.messageContainer.innerHTML="<p>"+e.helpTextShort+"</p>"),$A.remAttr(e.container,"aria-labelledby")),e.showEscBtn&&(e.content+='<button id="'+e.baseId+'esc" aria-label="'+e.escBtnName+'" title="'+e.escBtnName+'" class="esc-button">'+e.escBtnIcon+"</button>")},mouseEnter:function(e,t){t.mouseWithin=!0},mouseLeave:function(e,t){t.mouseWithin=!1},click:function(e,t){e.stopPropagation()},keyDown:function(e,t){112===$A.keyEvent(e)&&($A.remAttr(t.container,"aria-labelledby"),t.container.appendChild(t.messageContainer),$A.setAttr(t.messageContainer,{role:"alert"}),w||(t.messageContainer.innerHTML="<p>"+t.helpText+"</p>"),e.preventDefault(),e.stopPropagation())},updateDisabled:function(){this.query('td[aria-disabled="true"]',function(e,t){$A.data(t,"disabled",!0)})},updateCommented:function(){this.query("td.comment",function(e,t){$A.data(t,"_HasComment",!0)})},duringRender:function(e){e.rerendering?e.container.innerHTML=e.content:(e.datepickerLoaded=!1,e.setAttr({title:w?"":e.helpTextShort})),e.messageContainer.innerHTML&&e.container.appendChild(e.messageContainer)},afterRender:function(o){function d(){if(!o.disableNavNextMonthBtn||!$A.data(o.buttons.nM,"disabled")){$A.extend(!0,o.prevCurrent,o.range.current);var e=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:1});if(o.isOutsideDateRange(new Date(e.year,e.month,1)))o.date=o.maxDate;else{var t=o.range.current.mDay>o.range[e.month].max?o.range[e.month].max:o.range.current.mDay,n=new Date(e.year,e.month,t);o.isOutsideDateRange(n)?o.date=o.maxDate:o.date=n}o.setCurrent(o),o.rerenderTable(o)}}function i(){if(!o.disableNavPrevMonthBtn||!$A.data(o.buttons.pM,"disabled")){$A.extend(!0,o.prevCurrent,o.range.current);var e=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:-1});if(o.isOutsideDateRange(new Date(e.year,e.month,o.range[e.month].max)))o.date=o.minDate;else{var t=o.range.current.mDay>o.range[e.month].max?o.range[e.month].max:o.range.current.mDay,n=new Date(e.year,e.month,t);o.isOutsideDateRange(n)?o.date=o.minDate:o.date=n}o.setCurrent(o),o.rerenderTable(o)}}function u(e){if((e||!(!x.condenseYear&&$A.data(o.buttons.pY,"disabled")||x.condenseYear&&o.disableNavPrevYearBtn))&&(!e||!(!x.condenseYear&&$A.data(o.buttons.nY,"disabled")||x.condenseYear&&o.disableNavNextYearBtn))){$A.extend(!0,o.prevCurrent,o.range.current);var t=o.range.current.month,n=e?o.range.current.year+1:o.range.current.year-1;1===t&&(o.range[1].max=28);var a=o.range.current.mDay>o.range[t].max?o.range[t].max:o.range.current.mDay,r=new Date(n,t,a);o.isOutsideDateRange(r)||(o.date=r,o.setCurrent(o),o.rerenderTable(o))}}o.showEscBtn&&(o.escBtn=o.container.querySelector("button.esc-button")),o.buttons={pY:x.condenseYear?null:$A.get(o.prevBtnId+"Y"),nY:x.condenseYear?null:$A.get(o.nextBtnId+"Y"),pM:$A.get(o.prevBtnId),nM:$A.get(o.nextBtnId)},!x.condenseYear&&o.disableNavPrevYearBtn&&$A.setAttr(o.buttons.pY,"aria-disabled","true"),!x.condenseYear&&o.disableNavNextYearBtn&&$A.setAttr(o.buttons.nY,"aria-disabled","true"),o.disableNavPrevMonthBtn&&$A.setAttr(o.buttons.pM,"aria-disabled","true"),o.disableNavNextMonthBtn&&$A.setAttr(o.buttons.nM,"aria-disabled","true"),o.prevCurrent||(o.prevCurrent={}),$A.extend(!0,o.prevCurrent,o.range.current),o.updateDisabled(),o.updateCommented();var c=!1;$A.on("#"+o.containerId+" td.day",{focus:function(e){if($A.data(this,"_HasComment")){var t=o.range[o.range.current.month].comments[o.range.current.year],n=o.range[o.range.current.month].comments["*"],a="";t&&t[o.range.current.mDay]?a=t[o.range.current.mDay]:n&&n[o.range.current.mDay]&&(a=n[o.range.current.mDay]),(a=$A.trim(a.replace(/<|>/g,"")))&&(y.content=a,y.rerender(function(){h.openEditor&&(h.openEditor=!1,h.loaded&&h.reset())}))}else y.loaded&&y.remove()},click:function(e){if($A.hasClass(this,"dayInPrevMonth")){var t=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:-1});o.date=new Date(t.year,t.month,o.range.track[this.id])}else if($A.hasClass(this,"dayInNextMonth")){var n=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:1});o.date=new Date(n.year,n.month,o.range.track[this.id])}else o.date.setDate(o.range.track[this.id]);o.setCurrent(o),$A.data(this,"_Selected")||!p&&!$A.data(this,"_HasComment")?$A.data(this,"disabled")?(e.stopPropagation(),e.preventDefault()):($A.extend(!0,o.fn.current,o.range.current),g=!(m=!1),o.storeCurrentDate(o),f.apply(this,[e,o,$])):o.setFocus(this),e.preventDefault()},keydown:function(e){l(e);var t=$A.keyEvent(e);if(13===t)c=!0,$A.data(this,"disabled")||($A.extend(!0,o.fn.current,o.range.current),g=!(m=!1),o.storeCurrentDate(o),f.apply(this,[e,o,$])),e.preventDefault();else if(32===t&&p&&x.editor&&x.editor.show&&!h.openEditor)h.openEditor=!0,h.reset(),e.preventDefault();else if(37<=t&&t<=40||27===t||33<=t&&t<=36){var n=o.range.current.wDay;if(37===t){if($A.extend(!0,o.prevCurrent,o.range.current),1<o.range.current.mDay)o.range.current.mDay--,o.range.current.wDay=n?n-1:6,o.setFocus(o.range.index[o.range.current.mDay-1],this);else if(1===o.range.current.mDay&&!$A.data(o.buttons.pM,"disabled")){var a=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:-1}),r=o.range[a.month].max;1===a.month&&(r=1===new Date(a.year,1,29).getMonth()?29:28),o.date=new Date(a.year,a.month,r),o.setCurrent(o),o.rerenderTable(o)}}else if(39===t)$A.extend(!0,o.prevCurrent,o.range.current),o.range.current.mDay<o.range[o.range.current.month].max?(o.range.current.mDay++,o.range.current.wDay=6===n?0:n+1,o.setFocus(o.range.index[o.range.current.mDay-1],this)):o.range.current.mDay!=o.range[o.range.current.month].max||$A.data(o.buttons.nM,"disabled")||(a=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:1}),o.date=new Date(a.year,a.month,1),o.setCurrent(o),o.rerenderTable(o));else if(38===t){if($A.extend(!0,o.prevCurrent,o.range.current),0<o.range.current.mDay-7)o.range.current.mDay-=7,o.setFocus(o.range.index[o.range.current.mDay-1],this);else if(!$A.data(o.buttons.pM,"disabled")){1===(a=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:-1})).month&&1===new Date(a.year,1,29).getMonth()?o.range[a.month].max=29:1===a.month&&(o.range[a.month].max=28),r=o.range[a.month].max+(o.range.current.mDay-7);var s=new Date(a.year,a.month,r);o.isOutsideDateRange(s)||(o.date=s,o.setCurrent(o),o.rerenderTable(o))}}else if(40===t)$A.extend(!0,o.prevCurrent,o.range.current),o.range.current.mDay+7<=o.range[o.range.current.month].max?(o.range.current.mDay+=7,o.setFocus(o.range.index[o.range.current.mDay-1],this)):$A.data(o.buttons.nM,"disabled")||(a=o.modifyDateValues({month:o.range.current.month,year:o.range.current.year},{month:1}),r=o.range.current.mDay+7-o.range[o.range.current.month].max,s=new Date(a.year,a.month,r),o.isOutsideDateRange(s)||(o.date=s,o.setCurrent(o),o.rerenderTable(o)));else if(27===t)o.remove(),g=!(m=!1),$A.focus($);else if(33===t)$A.extend(!0,o.prevCurrent,o.range.current),o.pageUpDownNatural?D.alt?u(!1):i():D.alt?u(!0):d();else if(34===t)$A.extend(!0,o.prevCurrent,o.range.current),o.pageUpDownNatural?D.alt?u(!0):d():D.alt?u(!1):i();else if(36===t){if($A.extend(!0,o.prevCurrent,o.range.current),n!==o.iterS&&1<o.range.current.mDay){for(;o.range.current.wDay!==o.iterS&&$A.get(o.baseId+(o.range.current.mDay-1));)o.range.current.wDay=o.range.current.wDay-1<0?6:o.range.current.wDay-1,o.range.current.mDay--;o.setFocus(o.range.index[o.range.current.mDay-1],this)}}else if(35===t&&($A.extend(!0,o.prevCurrent,o.range.current),n!==o.iterE&&o.range.current.mDay<o.range[o.range.current.month].max)){for(;o.range.current.wDay!==o.iterE&&$A.get(o.baseId+(o.range.current.mDay+1));)o.range.current.wDay=6<o.range.current.wDay+1?0:o.range.current.wDay+1,o.range.current.mDay++;o.setFocus(o.range.index[o.range.current.mDay-1],this)}e.preventDefault()}else 9!==t||D.alt||D.ctrl||D.shift?9!==t||D.alt||D.ctrl||!D.shift||($A.extend(!0,o.prevCurrent,o.range.current),$A.data(o.buttons.nM,"disabled")?$A.data(o.buttons.pM,"disabled")?x.condenseYear||$A.data(o.buttons.nY,"disabled")?x.condenseYear||$A.data(o.buttons.pY,"disabled")||o.buttons.pY.focus():o.buttons.nY.focus():o.buttons.pM.focus():o.buttons.nM.focus(),e.preventDefault()):($A.extend(!0,o.prevCurrent,o.range.current),p&&h.loaded?h.textarea.hidden?h.commentBtn.focus():h.textarea.focus():o.showEscBtn||(x.condenseYear||$A.data(o.buttons.pY,"disabled")?x.condenseYear||$A.data(o.buttons.nY,"disabled")?$A.data(o.buttons.pM,"disabled")?$A.data(o.buttons.nM,"disabled")||o.buttons.nM.focus():o.buttons.pM.focus():o.buttons.nY.focus():o.buttons.pY.focus(),e.preventDefault()))},keyup:function(e){l(e),13!==$A.keyEvent(e)||c||o.isAdd||($A.data(this,"disabled")||($A.extend(!0,o.fn.current,o.range.current),o.setFocus.firstOpen||(g=!(m=!1),o.storeCurrentDate(o),f.apply(this,[e,o,$]))),e.preventDefault()),c=o.setFocus.firstOpen=o.isAdd=!1}},"."+M),o.showEscBtn&&$A.on(o.escBtn,{click:function(e){o.remove(),g=!(m=!1),$A.focus($),e.preventDefault()},keydown:function(e){l(e);var t=$A.keyEvent(e);27===t||13===t||32===t?(o.remove(),g=!(m=!1),$A.focus($)):9!==t||D.alt||D.ctrl||D.shift?9!==t||D.alt||D.ctrl||!D.shift||p&&h.loaded&&h.commentBtn.focus():(x.condenseYear||$A.data(o.buttons.pY,"disabled")?x.condenseYear||$A.data(o.buttons.nY,"disabled")?$A.data(o.buttons.pM,"disabled")?$A.data(o.buttons.nM,"disabled")?s.current.focus():o.buttons.nM.focus():o.buttons.pM.focus():o.buttons.nY.focus():o.buttons.pY.focus(),e.preventDefault())},keyup:function(e){l(e)},focus:function(e){},blur:function(e){}},"."+M),$A.on(o.buttons.pM,{click:function(e){o.navBtn="PM",i(),e.preventDefault()},keydown:function(e){l(e);var t=$A.keyEvent(e);13===t||32===t?(o.navBtn="PM",i(),e.preventDefault()):27===t?(o.remove(),g=!(m=!1),$A.focus($),e.preventDefault()):x.condenseYear||38!==t?39===t?(o.buttons.nM.focus(),e.preventDefault()):37===t||40===t?e.preventDefault():9!==t||D.alt||D.ctrl||D.shift?9!==t||D.alt||D.ctrl||!D.shift||(x.condenseYear||$A.data(o.buttons.nY,"disabled")?x.condenseYear||$A.data(o.buttons.pY,"disabled")?o.showEscBtn?(o.escBtn.focus(),e.preventDefault()):p&&h.loaded?h.textarea.hidden?h.commentBtn.focus():h.textarea.focus():(s.current.focus(),e.preventDefault()):(o.buttons.pY.focus(),e.preventDefault()):(o.buttons.nY.focus(),e.preventDefault())):($A.data(o.buttons.nM,"disabled")?s.current.focus():o.buttons.nM.focus(),e.preventDefault()):(o.buttons.pY.focus(),e.preventDefault())},keyup:function(e){l(e)}},"."+M),$A.on(o.buttons.nM,{click:function(e){o.navBtn="NM",d(),e.preventDefault()},keydown:function(e){l(e);var t=$A.keyEvent(e);13===t||32===t?(o.navBtn="NM",d(),e.preventDefault()):27===t?(o.remove(),g=!(m=!1),$A.focus($),e.preventDefault()):x.condenseYear||38!==t?37===t?(o.buttons.pM.focus(),e.preventDefault()):39===t||40===t?e.preventDefault():9!==t||D.alt||D.ctrl||D.shift?9!==t||D.alt||D.ctrl||!D.shift||($A.data(o.buttons.pM,"disabled")?x.condenseYear||$A.data(o.buttons.nY,"disabled")?x.condenseYear||$A.data(o.buttons.pY,"disabled")?o.showEscBtn?(o.escBtn.focus(),e.preventDefault()):p&&h.loaded?h.textarea.hidden?h.commentBtn.focus():h.textarea.focus():(s.current.focus(),e.preventDefault()):(o.buttons.pY.focus(),e.preventDefault()):(o.buttons.nY.focus(),e.preventDefault()):(o.buttons.pM.focus(),e.preventDefault())):(s.current.focus(),e.preventDefault()):(o.buttons.nY.focus(),e.preventDefault())},keyup:function(e){l(e)}},"."+M),x.condenseYear||$A.on(o.buttons.pY,{click:function(e){o.navBtn="PY",u(),e.preventDefault()},keydown:function(e){l(e);var t=$A.keyEvent(e);13===t||32===t?(o.navBtn="PY",u(),e.preventDefault()):27===t?(o.remove(),g=!(m=!1),$A.focus($),e.preventDefault()):39===t?(o.buttons.nY.focus(),e.preventDefault()):40===t?(o.buttons.pM.focus(),e.preventDefault()):37===t||38===t?e.preventDefault():9!==t||D.alt||D.ctrl||D.shift?9!==t||D.alt||D.ctrl||!D.shift||(o.showEscBtn?o.escBtn.focus():p&&h.loaded?h.commentBtn.focus():s.current.focus(),e.preventDefault()):($A.data(o.buttons.nY,"disabled")?$A.data(o.buttons.pM,"disabled")?$A.data(o.buttons.nM,"disabled")?s.current.focus():o.buttons.nM.focus():o.buttons.pM.focus():o.buttons.nY.focus(),e.preventDefault())},keyup:function(e){l(e)}},"."+M),x.condenseYear||$A.on(o.buttons.nY,{click:function(e){o.navBtn="NY",u(!0),e.preventDefault()},keydown:function(e){l(e);var t=$A.keyEvent(e);13===t||32===t?(o.navBtn="NY",u(!0),e.preventDefault()):27===t?(o.remove(),g=!(m=!1),$A.focus($),e.preventDefault()):37===t?(o.buttons.pY.focus(),e.preventDefault()):40===t?(o.buttons.nM.focus(),e.preventDefault()):38===t||39===t?e.preventDefault():9!==t||D.alt||D.ctrl||D.shift?9!==t||D.alt||D.ctrl||!D.shift||($A.data(o.buttons.pY,"disabled")?o.showEscBtn?(o.escBtn.focus(),e.preventDefault()):p&&h.loaded?h.textarea.hidden?h.commentBtn.focus():h.textarea.focus():(s.current.focus(),e.preventDefault()):(o.buttons.pY.focus(),e.preventDefault())):($A.data(o.buttons.pM,"disabled")?$A.data(o.buttons.nM,"disabled")?s.current.focus():o.buttons.nM.focus():o.buttons.pM.focus(),e.preventDefault())},keyup:function(e){l(e)}},"."+M),o.range.index=o.container.querySelectorAll("td.dayInMonth"),o.setFocus.firstOpen=!0,o.setFocus(o.range.index[o.range.current.mDay-1]),o.rerendering||(p&&x.editor&&x.editor.show&&h.render(),o.openOnFocus&&$A.setAttr($,"aria-expanded","true"),$A.setAttr(o.triggerNode,"aria-expanded","true"),setTimeout(function(){o.datepickerLoaded=!0},750))},helpTextShort:e,helpText:t,afterRemove:function(e){e.rerendering||(x.resetCurrent&&(e.date=new Date,e.setCurrent(e),$A.extend(!0,e.fn.current,e.range.current)),p&&y.remove(),p&&x.editor&&x.editor.show&&(h.lock=!1,h.remove()),$A.setAttr(e.triggerNode,"aria-expanded","false")),$A.isFn(x.configure)&&(e.lock=e.configureLoading=!1)}}],x)[0],y=$A(s,[{id:a+"commentTooltip",role:x.comments&&x.comments.role||"Comment",widgetType:"Datepicker",returnFocus:!1,className:x.comments&&x.comments.className||"commentTooltip",beforeRender:function(e){e.targetNode=e.parent.wrapper}}],x.comments&&x.comments.config||{})[0],h=$A(s,[{id:a+"commentAdd",role:x.editor&&x.editor.role||"Edit",widgetType:"Datepicker",className:x.editor&&x.editor.className||"commentAdd",openEditor:!1,content:'<textarea style="visibility: hidden; display: none;" class="commentTa" title="'+y.role+'"></textarea><button title="'+(x.editor&&x.editor.role||"Edit")+" "+y.role+'" class="commentBtn">'+(x.editor&&x.editor.role||"Edit")+"</button>",beforeRender:function(e){e.targetNode=e.parent.wrapper},click:function(e,t){e.stopPropagation()},duringRender:function(e){$A.setAttr(e.wrapper,{role:"dialog","aria-modal":"false","aria-label":e.role}),$A.setAttr(e.container,"role","application")},add:function(e){var t=$A.trim(e.textarea.value.replace(/<|>|\n/g," "));e.comments[e.parent.range.current.year]||(e.comments[e.parent.range.current.year]={}),e.comments[e.parent.range.current.year][e.parent.range.current.mDay]=t;var n=e.parent.range.current.mDay+", "+e.parent.range.wDays[e.parent.range.current.wDay].lng+" "+e.parent.range[e.parent.range.current.month].name+" "+e.parent.range.current.year,a="";(e.parent.range[e.parent.range.current.month].disabled[e.parent.range.current.year]&&-1!==$A.inArray(e.parent.range.current.mDay,e.parent.range[e.parent.range.current.month].disabled[e.parent.range.current.year])||e.parent.range[e.parent.range.current.month].disabled["*"]&&-1!==$A.inArray(e.parent.range.current.mDay,e.parent.range[e.parent.range.current.month].disabled["*"]))&&(a+=e.parent.disabledTxt.replace(/<|>|\"/g,"")+" "),t?($A.addClass(e.parent.current,"comment"),$A.data(e.parent.current,"_HasComment",!0),a+=e.parent.commentedTxt.replace(/<|>|\"/g,"")+" "):($A.remClass(e.parent.current,"comment"),$A.data(e.parent.current,"_HasComment",!1)),n=a+n,$A.setAttr(e.parent.current,{title:$A.trim(a),"aria-label":n+" "+t.replace(/\"/g,'"')})},reset:function(){var n=this;if(n.loaded)if(n.openEditor){n.textarea?($A.css(n.textarea,{visibility:"",display:""}),n.css("left",n.parent.wrapper.offsetLeft)):n.textarea=n.query("textarea",function(){$A.css(this,{visibility:"",display:""}),n.css("left",n.parent.wrapper.offsetLeft),$A.on(this,{focus:function(e){y.loaded&&y.remove()},keydown:function(e){var t=$A.keyEvent(e);800<this.value.length&&(this.value=this.value.substring(0,799)),13===t?(n.parent.isAdd=!0,n.add.apply(this,[n]),n.parent.current.focus(),n.openEditor=!1,n.reset(),e.preventDefault()):27===t&&(n.parent.current.focus(),n.openEditor=!1,n.reset(),e.preventDefault())}},"."+M)})[0],$A.setAttr(n.textarea,{title:n.parent.range.current.mDay+", "+n.parent.range.wDays[n.parent.range.current.wDay].lng+" "+n.parent.range[n.parent.range.current.month].name+" "+n.parent.range.current.year}).focus(),n.comments=n.parent.range[n.parent.range.current.month].comments;var e=n.comments[n.parent.range.current.year]&&n.comments[n.parent.range.current.year][n.parent.range.current.mDay]||n.comments["*"]&&n.comments["*"][n.parent.range.current.mDay]||"";e&&(n.textarea.value=e),$A.setAttr(n.commentBtn,{title:(x.editor&&x.editor.action1||"Save")+" "+y.role}).innerHTML=x.editor&&x.editor.action1||"Save"}else n.textarea&&(n.textarea.value="",$A.css(n.textarea,{visibility:"hidden",display:"none"})),n.css("left",n.parent.wrapper.offsetLeft+n.parent.wrapper.offsetWidth-n.wrapper.offsetWidth),$A.setAttr(n.commentBtn,{title:(x.editor&&x.editor.role||"Edit")+" "+y.role}).innerHTML=x.editor&&x.editor.role||"Edit"},afterRender:function(n){n.textarea=n.container.querySelector("textarea"),n.commentBtn=n.container.querySelector("button"),$A.on(n.commentBtn,{focus:function(e){y.loaded&&y.remove()},click:function(e){n.openEditor?(n.parent.isAdd=!0,n.add.apply(n.commentBtn,[n]),n.parent.current.focus(),n.openEditor=!1):n.openEditor=!0,n.reset(),e.preventDefault()},keydown:function(e){var t=$A.keyEvent(e);27===t?(n.openEditor&&(n.parent.current.focus(),n.openEditor=!1,n.reset()),e.preventDefault()):9!==t||e.altKey||e.shiftKey||e.ctrlKey||(n.parent.showEscBtn?n.escBtn.focus():x.condenseYear||$A.data(n.parent.buttons.pY,"disabled")?x.condenseYear||$A.data(n.parent.buttons.nY,"disabled")?$A.data(n.parent.buttons.pM,"disabled")?$A.data(n.parent.buttons.nM,"disabled")||n.parent.buttons.nM.focus():n.parent.buttons.pM.focus():n.parent.buttons.nY.focus():n.parent.buttons.pY.focus(),e.preventDefault())}},"."+M),n.reset(),n.lock=!0,$A.on(n.textarea,"keydown",function(e){var t=$A.keyEvent(e);27===t?(n.openEditor&&(n.parent.current.focus(),n.openEditor=!1,n.reset()),e.preventDefault()):9!==t||e.altKey||e.ctrlKey||!e.shiftKey?13===t&&(n.commentBtn.click(),e.preventDefault()):(s.current.focus(),e.preventDefault())},"."+M)},beforeRemove:function(e){e.openEditor=!1,e.textarea=null,e.parent.setFocus.firstOpen=!0},lock:!(p&&x.editor&&x.editor.show)}],x.editor&&x.editor.config||{})[0];function o(){u=!1}function d(){u||i.loaded||i.disabled?!u&&i.loaded&&(u=!0,i.remove(),g=m=!1,setTimeout(o,1e3)):(g=!(m=!(u=!0)),$A.trigger(this,"opendatepicker"),setTimeout(o,1e3))}$A.on(window,"resize",function(e){s.setPosition(),y.setPosition(),h.setPosition(),h.reset()},"."+M),$A.setAttr(r,"aria-expanded","false");var i=s,u=!1;$A.on(r,{click:function(e){d.call(this),e.preventDefault()},keydown:function(e){32===$A.keyEvent(e)&&(d.call(this),e.preventDefault(),e.stopPropagation())}},"."+M);var w=!1;return!0===x.openOnFocus?($A.setAttr($,"aria-expanded","false"),$A.on($,{touchstart:function(e){w=!0,u||i.loaded||m||g||i.disabled||(u=!0,$A.trigger(r,"opendatepicker"),e.preventDefault(),setTimeout(o,1e3))},focus:function(e){!w||u||i.loaded||m||!g?u||i.loaded||m||g||i.disabled||(u=!0,$A.trigger(r,"opendatepicker"),w||setTimeout(function(){$A.announce(i.openOnFocusHelpText)},1),setTimeout(o,1e3)):(e.preventDefault(),this.blur(),r&&$A.setFocus(r)),g=!(m=!0)},mousedown:function(e){this.blur(),m=g=!1,this.focus()},blur:function(e){i.loaded&&m&&!g&&!i.mouseWithin&&i.remove(),m=!1},keydown:function(e){var t=$A.keyEvent(e);40===t&&m&&!g&&i.loaded?(g=!(m=!1),i.setFocus(i.range.index[i.range.current.mDay-1]),e.preventDefault(),e.stopPropagation()):40!==t||i.loaded||u||i.disabled?27===t&&m&&!g&&i.loaded?(g=m=!1,i.remove(),e.preventDefault(),e.stopPropagation()):9===t&&m&&!g&&i.loaded&&e.shiftKey?(g=m=!1,i.remove()):9===t&&m&&!g&&i.loaded&&!e.shiftKey&&(g=!(m=!1),i.setFocus(i.range.index[i.range.current.mDay-1]),setTimeout(function(){$A.announce(i.helpTextShort)},1),e.preventDefault(),e.stopPropagation()):(g=!(m=u=!0),$A.trigger(r,"opendatepicker"),setTimeout(o,1e3),g=!(m=!1),i.setFocus(i.range.index[i.range.current.mDay-1]),e.preventDefault(),e.stopPropagation())}},"."+M)):$A.on($,{touchstart:function(e){w=!0},focus:function(e){!w||u||i.loaded||m||!g||(e.preventDefault(),this.blur(),r&&$A.setFocus(r)),g=!(m=!0)}}),i.setDisabled(i,i.disabled),$A(r).describedBy($).controls($),$A.on("body","click",function(e){s.datepickerLoaded&&s.remove()},"."+M),s}}));